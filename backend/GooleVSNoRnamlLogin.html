<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google OAuth + Email Auth Guide</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .download-btn {
            background: #fff;
            color: #667eea;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        #pdf-content {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 50px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.9;
        }
        
        .content {
            padding: 50px;
        }
        
        .section {
            margin-bottom: 40px;
            border-left: 5px solid;
            padding: 30px;
            border-radius: 0 10px 10px 0;
        }
        
        .section-problem {
            background: #fee;
            border-color: #e53e3e;
        }
        
        .section-solution {
            background: #efe;
            border-color: #38a169;
        }
        
        .section-scenario1 {
            background: #fef5e7;
            border-color: #f39c12;
        }
        
        .section-scenario2 {
            background: #ebf8ff;
            border-color: #3182ce;
        }
        
        .section-implementation {
            background: linear-gradient(135deg, #fef5ff 0%, #ffe5f5 100%);
            border-color: #9333ea;
        }
        
        .section h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #2d3748;
        }
        
        .section-problem h2 { color: #c53030; }
        .section-solution h2 { color: #276749; }
        .section-scenario1 h2 { color: #c05621; }
        .section-scenario2 h2 { color: #2c5282; }
        .section-implementation h2 { color: #7928ca; }
        
        .code-block {
            background: #1a202c;
            color: #68d391;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 14px;
            white-space: pre;
        }
        
        .highlight {
            background: #fef5e7;
            padding: 20px;
            border: 2px solid #f39c12;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .highlight-green {
            background: #e6fffa;
            border-color: #38a169;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-top: 10px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .emphasis {
            color: #667eea;
            font-weight: bold;
        }
        
        .warning {
            color: #e53e3e;
            font-weight: bold;
        }
        
        .success {
            color: #38a169;
            font-weight: bold;
        }
        
        .step-title {
            font-size: 1.4em;
            color: #7928ca;
            font-weight: bold;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        tr:hover {
            background: #f7fafc;
        }
        
        .inline-code {
            background: #edf2f7;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="download-btn" onclick="downloadPDF()">üì• Download as PDF</button>
        
        <div id="pdf-content">
            <!-- Header -->
            <div class="header">
                <h1>üîê Complete Authentication Guide</h1>
                <p>Google OAuth + Email/Password Implementation</p>
            </div>
            
            <!-- Content -->
            <div class="content">
                <!-- Problem Section -->
                <div class="section section-problem">
                    <h2>‚úÖ Problem You Are Facing</h2>
                    <p style="margin-bottom: 15px;">You have a user table like:</p>
                    <div class="code-block">id | name | email | password | ...</div>
                    <ul>
                        <li>If someone signs up using <span class="emphasis">Google Login</span>, you do not get a password.</li>
                        <li>Later, if the same user tries to log in using <span class="emphasis">email + password</span>, the backend checks:</li>
                        <ul>
                            <li>Does email exist?</li>
                            <li>Does password match?</li>
                        </ul>
                    </ul>
                    <p style="margin-top: 15px;"><span class="warning">Since no password exists, login fails ‚Üí "Account does not exist".</span></p>
                </div>
                
                <!-- Solution Section -->
                <div class="section section-solution">
                    <h2>‚úÖ How Real-World Apps Handle This</h2>
                    <p style="margin-bottom: 10px; font-style: italic;">(Google, Facebook, Zomato, Swiggy, Amazon)</p>
                    <p style="margin-bottom: 15px;">Real apps do not store only one type of login. They store <span class="emphasis">login method</span> as well.</p>
                    <p style="margin-bottom: 10px;">They use a user schema like:</p>
                    <div class="code-block">id | name | email | password | loginType</div>
                    <p style="margin-bottom: 10px;">Where:</p>
                    <ul>
                        <li>loginType = <span class="inline-code">"google"</span></li>
                        <li>OR loginType = <span class="inline-code">"email"</span></li>
                        <li>OR loginType = <span class="inline-code">"facebook"</span></li>
                    </ul>
                    <p style="margin-top: 15px;">If user logs in with Google ‚Üí <span class="inline-code">password = null</span> and <span class="inline-code">loginType = "google"</span>.</p>
                </div>
                
                <!-- Scenario 1 -->
                <div class="section section-scenario1">
                    <h2>üëâ Scenario 1: User signed up with Google, later tries email/password</h2>
                    <p style="font-weight: bold; margin-bottom: 15px;">What should happen?</p>
                    <div class="highlight">
                        <p style="font-weight: bold; margin-bottom: 10px;">Option A ‚Äî Show message:</p>
                        <p style="font-style: italic; color: #2d3748;">"You previously signed up with Google. Please continue with Google login."</p>
                        <p style="margin-top: 10px; color: #c05621; font-weight: bold;">‚ú® This is what 90% real apps do.</p>
                    </div>
                    <p style="margin-top: 15px;">You cannot match passwords because none exist.</p>
                </div>
                
                <!-- Scenario 2 -->
                <div class="section section-scenario2">
                    <h2>üëâ Scenario 2: User signed up with email/password, later tries Google login</h2>
                    <p style="margin-bottom: 10px;">Real apps check:</p>
                    <ul>
                        <li>If email exists ‚Üí log that user in automatically (link Google ID to the same account)</li>
                        <li>Do not create a new account</li>
                        <li>Do not require password again</li>
                    </ul>
                    <p style="margin-top: 15px; color: #2c5282; font-weight: bold;">‚ú® This gives a smooth experience.</p>
                </div>
                
                <!-- Implementation -->
                <div class="section section-implementation">
                    <h2>‚≠ê So What Should You Do?</h2>
                    
                    <div class="step-title">‚úî Step 1: Change your User Schema</div>
                    <p style="margin-bottom: 10px;">Add two fields:</p>
                    <div class="code-block">loginType: "email" | "google"
googleId: string | null</div>
                    <p style="margin-bottom: 10px;">Example MongoDB schema:</p>
                    <div class="code-block">const UserSchema = new mongoose.Schema({
  name: String,
  email: { type: String, unique: true },
  password: String,
  loginType: { 
    type: String, 
    enum: ["email", "google"], 
    default: "email" 
  },
  googleId: String
});</div>
                    
                    <div class="step-title">‚úî Step 2: Google Login Flow</div>
                    <p style="margin-bottom: 10px;">When user logs in via Google:</p>
                    <ol>
                        <li>Check if email exists in DB</li>
                        <li>IF EXISTS:
                            <ul>
                                <li>If <span class="inline-code">loginType = "email"</span> ‚Üí ask user to verify password once OR switch account to Google login.</li>
                                <li>If <span class="inline-code">loginType = "google"</span> ‚Üí log them in normally.</li>
                            </ul>
                        </li>
                        <li>IF DOES NOT EXIST: ‚Üí create new user with:</li>
                    </ol>
                    <div class="code-block">password = null
loginType = "google"
googleId = profile.id</div>
                    
                    <div class="step-title">‚úî Step 3: Email/Password Login Flow</div>
                    <p style="margin-bottom: 10px;">When user enters email/password:</p>
                    <ul>
                        <li>If <span class="inline-code">user.loginType = "google"</span> ‚Üí return:</li>
                    </ul>
                    <div class="code-block">You signed up using Google. Please continue with Google Login.</div>
                    <ul>
                        <li>Else ‚Üí normal password login.</li>
                    </ul>
                </div>
                
                <!-- Summary Table -->
                <div class="section section-solution">
                    <h2>üéØ Final Summary</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Case</th>
                                <th>What Real Apps Do</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Google first ‚Üí email login later</strong></td>
                                <td>Ask user to login with Google (no password exists)</td>
                            </tr>
                            <tr>
                                <td><strong>Email first ‚Üí Google login later</strong></td>
                                <td>Merge same email to same account</td>
                            </tr>
                            <tr>
                                <td><strong>Different login methods</strong></td>
                                <td>Store loginType + googleId in DB</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="highlight highlight-green" style="margin-top: 30px;">
                        <p style="font-weight: bold; font-size: 1.2em; margin-bottom: 10px;">üì¶ Full Backend Implementation Available:</p>
                        <ul>
                            <li>‚úî Google OAuth setup</li>
                            <li>‚úî Login routes</li>
                            <li>‚úî JWT tokens</li>
                            <li>‚úî User schema</li>
                            <li>‚úî Handling both login methods</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function downloadPDF() {
            const element = document.getElementById('pdf-content');
            const opt = {
                margin: 0.5,
                filename: 'Google-OAuth-Email-Auth-Guide.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>